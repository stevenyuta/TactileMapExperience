var tactileGraphic=function(t,r,a,e,n){var i,o,h=[[],[],[]],s=1,c=599,l=744,f=30,u=6,d=7,v=15,w=0,M=0,g=6,p=!1,I=!1;return t&&(i=document.getElementById(t),o=i.getContext("2d")),setsize=function(){switch(r){case"A4":c=599,l=744;break;case"B5":c=479,l=725;break;case"IJB6":c=176,l=272;break;case"IJB5":c=320,l=460;break;case"IJA4":c=360,l=540;break;case"IJB4":c=456,l=670;break;case"IJA3":c=536,l=790}},"edi"===a&&(f=28,u=5,d=5,v=12),{setDot:function(t){s=t},setCanvas:function(t){i=document.getElementById(t),o=i.getContext("2d"),this.drawCanvas()},drawCanvas:function(){for(var t=0;t<h.length;t++)for(var r=h[s].length,a=0;a<r;a++){var e=h[s][a]%1e3,n=(h[s][a]-X)/1e3;this.dot2preview(e,n)}},setSize:function(t){r=t,setsize()},setInterval:function(t){g=t},setColor:function(t){o.fillStyle=t},setAdjust:function(t){I=t},setBraille:function(t,r,a,e){f=t,u=r,d=a,v=e},setType:function(t){switch(t){case"edi":this.setBraille(28,5,5,12);break;default:this.setBraille(30,6,7,15)}},convertText:function(t){var r=[["きゃ","拗か"],["きゅ","拗く"],["きょ","拗こ"],["しゃ","拗さ"],["しゅ","拗す"],["しょ","拗そ"],["ちゃ","拗た"],["ちゅ","拗つ"],["ちょ","拗と"],["にゃ","拗な"],["にゅ","拗ぬ"],["にょ","拗の"],["ひゃ","拗は"],["ひゅ","拗ふ"],["ひょ","拗ほ"],["みゃ","拗ま"],["みゅ","拗む"],["みょ","拗も"],["りゃ","拗ら"],["りゅ","拗る"],["りょ","拗ろ"],["いぇ","拗え"],["きぇ","拗け"],["しぇ","拗せ"],["ちぇ","拗て"],["にぇ","拗ね"],["ひぇ","拗へ"],["すぃ","拗し"],["てぃ","拗ち"],["ぎゃ","小か"],["ぎゅ","小く"],["ぎょ","小こ"],["じゃ","小さ"],["じゅ","小す"],["じょ","小そ"],["ぢゃ","小た"],["ぢゅ","小つ"],["ぢょ","小と"],["びゃ","小は"],["びゅ","小ふ"],["びょ","小ほ"],["ぴゃ","斜は"],["ぴゅ","斜ふ"],["ぴょ","斜ほ"],["うぃ","+い"],["うぇ","+え"],["うぉ","+お"],["くぁ","+か"],["くぃ","+き"],["くぇ","+け"],["くぉ","+こ"],["つぁ","+た"],["つぃ","+ち"],["つぇ","+て"],["つぉ","+と"],["ふぁ","+は"],["ふぃ","+ひ"],["ふぇ","+へ"],["ふぉ","+ほ"],["ぐぁ","。か"],["ぐぃ","。き"],["ぐぇ","。け"],["ぐぉ","。こ"],["ヴぁ","。は"],["ヴぃ","。ひ"],["ヴぇ","。へ"],["ヴぉ","。ほ"],["とぅ","+つ"],["ずぃ","小し"],["でぃ","小ち"],["どぅ","。つ"],["てゅ","斜つ"],["ふゅ","斜ゆ"],["ふょ","斜よ"],["でゅ","拡つ"],["ヴゅ","拡ゆ"],["ヴョ","拡よ"],["が","濁か"],["ぎ","濁き"],["ぐ","濁く"],["げ","濁け"],["ご","濁こ"],["ざ","濁さ"],["じ","濁し"],["ず","濁す"],["ぜ","濁せ"],["ぞ","濁そ"],["だ","濁た"],["ぢ","濁ち"],["づ","濁つ"],["で","濁て"],["ど","濁と"],["ば","濁は"],["び","濁ひ"],["ぶ","濁ふ"],["べ","濁へ"],["ぼ","濁ほ"],["ぱ","半は"],["ぴ","半ひ"],["ぷ","半ふ"],["ぺ","半へ"],["ぽ","半ほ"],["キャ","拗カ"],["キュ","拗ク"],["キョ","拗コ"],["シャ","拗サ"],["シュ","拗ス"],["ショ","拗ソ"],["チャ","拗タ"],["チュ","拗ツ"],["チョ","拗ト"],["ニャ","拗ナ"],["ニュ","拗ヌ"],["ニョ","拗ノ"],["ヒャ","拗ハ"],["ヒュ","拗フ"],["ヒョ","拗ホ"],["ミャ","拗マ"],["ミュ","拗ム"],["ミョ","拗モ"],["リャ","拗ラ"],["リュ","拗ル"],["リョ","拗ロ"],["イェ","拗エ"],["キェ","拗ケ"],["シェ","拗セ"],["チェ","拗テ"],["ニェ","拗ネ"],["ヒェ","拗ヘ"],["スィ","拗シ"],["ティ","拗チ"],["ギャ","小カ"],["ギュ","小ク"],["ギョ","小コ"],["ジャ","小サ"],["ジュ","小ス"],["ジョ","小ソ"],["ヂャ","小タ"],["ヂュ","小ツ"],["ヂョ","小ト"],["ビャ","小ハ"],["ビュ","小フ"],["ビョ","小ホ"],["ピャ","斜ハ"],["ピュ","斜フ"],["ピョ","斜ホ"],["ウィ","+イ"],["ウェ","+エ"],["ウォ","+オ"],["クァ","+カ"],["クィ","+キ"],["クェ","+ケ"],["クォ","+コ"],["ツァ","+タ"],["ツィ","+チ"],["ツェ","+テ"],["ツォ","+ト"],["ファ","+ハ"],["フィ","+ヒ"],["フェ","+ヘ"],["フォ","+ホ"],["グァ","。カ"],["グィ","。キ"],["グェ","。ケ"],["グォ","。コ"],["ヴァ","。ハ"],["ヴィ","。ヒ"],["ヴェ","。ヘ"],["ヴォ","。ホ"],["トゥ","+ツ"],["ズィ","小シ"],["ディ","小チ"],["ドゥ","。ツ"],["テュ","斜ツ"],["フュ","斜ユ"],["フョ","斜ヨ"],["デュ","拡ツ"],["ヴュ","拡ユ"],["ヴョ","拡ヨ"],["ヴ","濁ウ"],["ガ","濁カ"],["ギ","濁キ"],["グ","濁ク"],["ゲ","濁ケ"],["ゴ","濁コ"],["ザ","濁サ"],["ジ","濁シ"],["ズ","濁ス"],["ゼ","濁セ"],["ゾ","濁ソ"],["ダ","濁タ"],["ヂ","濁チ"],["ヅ","濁ツ"],["デ","濁テ"],["ド","濁ト"],["バ","濁ハ"],["ビ","濁ヒ"],["ブ","濁フ"],["ベ","濁ヘ"],["ボ","濁ホ"],["パ","半ホ"],["ピ","半ヒ"],["プ","半フ"],["ペ","半ヘ"],["ポ","半ホ"]];t=(t+="").replace(/([0-9０１２３４５６７８９])/g,"数$1").replace(/([0-9０１２３４５６７８９])数/g,"$1").replace(/数数/g,"数").replace(/([0-9０１２３４５６７８９])([ろロﾛＪJｊjあアｱＡAａaいイｲＢBｂbうウｳＣCｃcるルﾙＤDｄdらラﾗＥEｅeれレﾚＧGｇgえエｴＦFｆfりリﾘＨHｈhおオｵＩIｉi])/g,"$1_$2");for(var a=0;a<r.length;a++){var e=new RegExp(r[a][0],"g");t=t.replace(e,r[a][1])}return t},drawBraille:function(t,r,a,e){r=r||0,a=a||0,e=e||c;var n=[["あアｱ１1ＡAａa","1"],["いイｲ２2ＢBｂb","12"],["うウｳ３3ＣCｃc","14"],["えエｴ６6ＦFｆf","124"],["おオｵ９9ＩIｉi","24"],["かカｶ＊*","16"],["きキｷ｛{","126"],["くクｸ","146"],["けケｹ","1246"],["こコｺ＠@","246"],["さサｻ","156"],["しシｼ","1256"],["すスｽ","1456"],["せセｾ","12456"],["そソｿＷWｗw","2456"],["たタﾀＯoｏo","135"],["ちチﾁＲRｒr","1235"],["つツﾂＮNｎn","1345"],["てテﾃＱQｑq","12345"],["とトﾄＴTｔt","2345"],["なナﾅＫKｋk","13"],["にニﾆＬLｌl","123"],["ぬヌﾇＭMｍm","134"],["ねネﾈＰPｐp％%","1234"],["のノﾉＳSｓs","234"],["はハﾊＵUｕu","136"],["ひヒﾋＶVｖv","1236"],["ふフﾌＸXｘx","1346"],["へヘﾍ＆&","12346"],["ほホﾎ","2346"],["まマﾏＺZｚz","1356"],["みミﾐ[","12356"],["むムﾑＹYｙy","13456"],["めメﾒ","123456"],["もモﾓ]","23456"],["やヤﾔ／/分","34"],["ゆユﾕ〒郵","346"],["よヨﾖ√根｝}","345"],["らラﾗ5５ＥEｅe","15"],["りリﾘ8８ＨHｈh","125"],["るルﾙ4４ＤDｄd","145"],["れレﾚ７7ＧGｇg","1245"],["ろロﾛ０0ＪJｊj","245"],['わワﾜ’"',"3"],["ゐヰ、，外＄$↓","56"],["ゑヱ、。．.句∋","256"],["をヲｦ－","35"],["をヲｦ－","35"],["んンﾝ零閉","356"],["八語","236"],["濁・〃中","5"],["数","3456"],["　 &nbsp;無",""],["ーー三","25"],["小＾^ぎギｷﾞじジｼﾞぢヂﾁﾞびビﾋﾞ↑","45"],["拗†￥´","4"],["半πΠ¶?ぱパﾊﾟ大","6"],["促っッｯ一","2"],["＿_「」-‐継～：:","36"],["七＝=","2356"],["斜‡ぴピﾋﾟ≠","46"],["？?＋+五疑","26"],["二；;","23"],["！!！感六","235"],["｜|拡","456"]];t=(t+="").replace(/&yen;[a-z]/g,"￥a"),t=this.convertText(t);for(var i=[],o=0;o<t.length;o++){var h=t.charAt(o);i.push(s(h))}function s(t){for(var r=[["\n","\n"],[".","256"],[",","2"],["(","2356"],[")","2356"],["[","2356"],["]","2356"],["\\","4"],["*","16"],[";","23"],["?","26"],["{","2356"],["}","2356"],["^"," "],["$","56"],["-","36"],["|","456"],["/","34"]],a=0;a<r.length;a++)if(t===r[a][0])return r[a][1];for(var e=0;e<n.length;e++)if(n[e][0].match(t))return n[e][1];return console.log("文字列に点字に変換出来ない文字が含まれています。"),"none"}return this.arr2braille(i,r,a,e)},arr2braille:function(t,r,a,e){!0===p&&(r-=t.length*v-8,p=!1);for(var n=0,i=n,o=0;o<t.length;o++)e<r+v*i+u&&(i=0,n++),t[o].match("1")&&this.drawDot(r+v*i,a+f*n),t[o].match("2")&&this.drawDot(r+v*i,a+d+f*n),t[o].match("3")&&this.drawDot(r+v*i,a+2*d+f*n),t[o].match("4")&&this.drawDot(r+u+v*i,a+f*n),t[o].match("5")&&this.drawDot(r+u+v*i,a+d+f*n),t[o].match("6")&&this.drawDot(r+u+v*i,a+2*d+f*n),i++,t[o].match("\n")&&(i=0,n++);return[r+v*i,a+f*n]},drawBrailleRight:function(t,r,a){p=!0,this.drawBraille(t,r,a)},drawBrailleMathRight:function(t,r,a){p=!0,this.drawBrailleMath(t,r,a)},drawBrailleMath:function(t,r,a){for(var e=[["Α","‡a"],["Β","‡b"],["Δ","‡c"],["Ε","‡e"],["Φ","‡f"],["Γ","‡g"],["Ι","‡i"],["Κ","‡k"],["Λ","‡l"],["Μ","‡m"],["Ν","‡n"],["Ο","‡o"],["Π","‡p"],["Ρ","‡r"],["Σ","‡s"],["Τ","‡t"],["Υ","‡y"],["Ω","‡w"],["Ξ","‡x"],["Ψ","‡y"],["Ζ","‡z"],["Η","‡さ"],["Θ","‡す"],["Χ","‡へ"],["α","†a"],["β","†b"],["δ","†c"],["ε","†e"],["φ","†f"],["γ","†g"],["ι","†i"],["κ","†k"],["λ","†l"],["μ","†m"],["ν","†n"],["ο","†o"],["π","†p"],["ρ","†r"],["σ","†s"],["τ","†ｔ"],["υ","†y"],["ω","†w"],["ξ","†x"],["ψ","†y"],["ζ","†z"],["η","†さ"],["θ","†す"],["χ","†へ"],["＋","？"],["－","を"],["×","＊"],["÷","分"],["・","わ"],["／","｜分"],["/","｜分"],["±","？を"],["：","中促"],["＝","ーー"],["≒","中ー"],["≠","‡ー"],["=","ーー"],["＞","？？"],["＜","をを"],[">","？？"],["<","をを"],["≧","ヱヱ"],["≦","語語"],["（","語"],["）","ん"],["｛","半き"],["{","半き"],["｝","よわ"],["}","よわ"],["［","半み"],["］","もわ"],["｜","し"],["\\|","し"],["∽","半わ"],["⊥","んわ"],["∠","す"],["⊿","ゆ"],["⌒","こ"],["平行四辺形","｜分分"],["∪","ゆ"],["∩","く"],["→","ーた"],["←","こー"],["√","根"],["！","外！"],["!","外！"],["\\(","語"],["\\)","ん"],["\\[","半み"],["\\]","もわ"]],n=e[0].length,i=0;i<n;i++){var o=new RegExp(e[i][0],"g");t=t.replace(o,e[i][1])}this.drawBraille(t,r,a)},drawLine:function(t,r,a,e,n){if(void 0===e)return this.drawLine(w,M,t,r);w=a,M=e;var i,o=Math.sqrt(Math.pow(a-t,2)+Math.pow(e-r,2)),h=Math.atan2(e-r,a-t),s=Math.floor(o/g);0===s&&(s=1),i=I?o/s:g;var c=0;for(1!==n&&3!==n||(c=1),2!==n&&3!==n||s--;c<=s;c++){var l=Math.cos(h)*i*c+t,f=Math.sin(h)*i*c+r;this.drawDot(l,f)}},drawLineTilt:function(t,r,a,e){var n=e/180*Math.PI,i=t+a*Math.cos(n),o=r+a*Math.sin(n);this.drawLine(t,r,i,o)},strokeRect:function(t,r,a,e,n){if(void 0!==n)return this.strokeRectTilt(t,r,a,e,n);this.drawDot(t+a,r+e),this.drawLine(t,r,t+a,r),this.drawLine(t,r,t,r+e),this.drawLine(t+a,r,t+a,r+e),this.drawLine(t,r+e,t+a,r+e)},strokeRectTilt:function(t,r,a,e,n){var i=n/180*Math.PI,o=t+a*Math.cos(i),h=r+a*Math.sin(i),s=(n+90)/180*Math.PI,c=t+e*Math.cos(s),l=r+e*Math.sin(s),f=c-t+o,u=l-r+h;this.drawLine(t,r,o,h),this.drawLine(f,u),this.drawLine(c,l),this.drawLine(t,r)},fillRect:function(t,r,a,e){a<0&&(t-=a*=-1),e<0&&(r-=e*=-1);for(var n=Math.round(e/3/2),i=0;i<=n;i++)this.drawLine(t,r+3*i*2,t+a,r+3*i*2)},strokeRhombus:function(t,r,a,e,n){if(void 0!==n)return this.strokeRhombusTilt(t,r,a,e,n);this.drawLine(t,r-e/2,t-a/2,r),this.drawLine(t,r+e/2),this.drawLine(t+a/2,r),this.drawLine(t,r-e/2)},strokeRhombusTilt:function(t,r,a,e,n){var i=t+a*Math.cos(n/180*Math.PI)/2,o=r+a*Math.sin(n/180*Math.PI)/2,h=t+e*Math.cos((n+90)/180*Math.PI)/2,s=r+e*Math.sin((n+90)/180*Math.PI)/2,c=2*t-i,l=2*r-o,f=2*t-h,u=2*r-s;this.drawLine(i,o,h,s),this.drawLine(c,l),this.drawLine(f,u),this.drawLine(i,o)},strokeTable:function(t,r,a,e,n,i){for(var o=0;o<n;o++)for(var h=0;h<i;h++)this.strokeRect(t+a*o,r+e*h,a,e)},strokeCircle:function(t,r,a){for(var e=2*Math.PI*a,n=360/Math.round(e/g),i=0;n*i<360;i++){var o=n*i/180*Math.PI,h=t+a*Math.cos(o),s=r+a*Math.sin(o);this.drawDot(h,s)}},strokeArc:function(t,r,a,e,n){for(var i=2*Math.PI*a,o=360/Math.round(i/g),h=0;o*h<n-e;h++){var s=(e-90+o*h)/180*Math.PI,c=t+a*Math.cos(s),l=r+a*Math.sin(s);this.drawDot(c,l)}},strokeOval:function(t,r,a){for(var e=2*Math.PI*a,n=360/Math.round(e/g),i=0;n*i<360;i++){var o=n*i/180*Math.PI,h=t+a*Math.cos(o)*.8,s=r+a*Math.sin(o)*1.2;this.drawDot(h,s)}},drawPattern:function(t,r,a){for(var e=t.length,n=0;n<e;n++)this.drawDot(t[n][0]+r,t[n][1]+a)},drawDot:function(t,r){t=Math.round(t),r=Math.round(r),this.dot2preview(t,r),h[s].push(1e3*r+t)},dot2preview:function(t,r){if(o){switch(o.beginPath(),s){case 0:o.arc(t,r,.5,0,2*Math.PI,!1);break;case 1:o.arc(t,r,1,0,2*Math.PI,!1);break;case 2:o.arc(t,r,1.5,0,2*Math.PI,!1)}o.fill()}},clearDot:function(t,r){o&&(o.fillStyle="#fff",o.beginPath(),o.arc(t,r,1,0,2*Math.PI,!1),o.fill(),o.fillStyle="#000");var a=1e3*r+t;h[s]=h[s].filter(function(t){return t!==a})},clear:function(){h=[[],[],[]],w=0,M=0,o.clearRect(0,0,c,l)},map2esa:function(){var t=document.createElement("canvas");t.setAttribute("width",599),t.setAttribute("height",744);var r=t.getContext("2d");function a(t){for(var a=h[t].length,e=0;e<a;e++){var n=h[t][e]%1e3,i=(h[t][e]-n)/1e3;r.fillRect(n,i,1,1)}}return r.fillStyle="#fff",r.fillRect(0,0,c,l),r.fillStyle="#00F",a(0),r.fillStyle="#000",a(1),r.fillStyle="#0F0",a(2),t.toDataURL()},loadArr:function(){return h},readEdl:function(t){for(var r=function(t,r){var a=[];if(!t||!r||r<1)return a;var e=0,n=e,i=n+r;for(;n<t.length;)a[e]=t.substring(n,i),e++,i=(n=i)+r;return a}(t=(t+="").replace(/^.+?[\n\r]/,"").replace(/[\n\r]/,"").replace(/[0-9]/g,""),4),a=r.length,e=0;e<a;e++){var n=r[e],i=26*h(n.charAt(0))+h(n.charAt(1)),o=26*h(n.charAt(2))+h(n.charAt(3));this.drawDot(i,o)}function h(t){for(var r=["@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_"],a=0;a<r.length;a++)if(t===r[a])return a}},loadEdl:function(){for(var t=[],a=0;a<h.length;a++)for(var e=h[a].length,n=0;n<e;n++)t.push(10*h[a][n]+a);t.sort(function(t,r){return t<r?-1:t>r?1:0});for(var i=0,o="",s=t.length,f=0;f<s;f++){var u=t[f]%1e4,d=(t[f]-u)/1e4,v=u%10+1,w=(u-v)/10;t[f-1]!==t[f]&&w<c&&d<l&&(o+=v===i?M(parseInt(w,10))+M(parseInt(d,10)):"\n"+v+M(parseInt(w,10))+M(parseInt(d,10)),i=v)}function M(t){var r=t.toString(26);r=r.replace(/10(.)/,"Z$1").replace(/11(.)/,"[$1").replace(/12(.)/,"\\$1");for(var a=[["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p"],["@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y"]],e=0;e<26;e++)r=("@"+(r=r.replace(new RegExp(a[0][e],"g"),a[1][e]))).slice(-2);return r}return o="EDEL"+r+",0,740"+o},aug:e,aug2:n}};